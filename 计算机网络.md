# 计算机网络

## HTTP和HTTPS

## TCP与UDP

1.  基于连接与无连接；
2.  对系统资源的要求（TCP较多，UDP少）；

3.  UDP程序结构较简单；

4.  流模式与数据报模式 ；
5.  TCP保证数据正确性，UDP可能丢包；

6.  TCP保证数据顺序，UDP不保证。

## URI和URL和URN

URI是URL和URN的统称

URL可以理解为一个地址，通过一次一次具体找到资源

URN是资源自己名字，通过解析名字直接找到资源

## OSI-七层模型

### 1.物理层

物理层是直接和物理介质打交道的。

物理层的设备：网卡，网线，集线器，中继器，调制解调器，信道

数据：比特流（bit）

### 2.数据链路层

将比特组合成字节进而组合成帧，用MAC地址访问介质，错误发现但不能纠正。

MAC地址：每个网卡的唯一标识

### 3.网络层

寻址

对网络层而言使用IP地址来唯一标识互联网上的设备，网络层依靠IP地址进行相互通信

路由

在同一个网络中的内部通信并不需要网络层设备，仅仅靠数据链路层就可以完成相互通信，对于不同的网络之间相互通信则必须借助路由器

### 4.传输层

定义我们的端口号，以及控流，和校验。

TCP 

是面向连接的协议并且TCP是可靠的。因为TCP会进行三次握手四次挥手所以是可靠的，但是这样会降低速度

UDP 

具有较好的实时性 效率比TCP高。UDP是没有三次握手四次挥手的，故此不稳定，但是速度快 常用于直播，游戏

### 5.会话层

SSL/TLS

### 6.表示层

安全 

在你的数据发送之前进行加密，在接受者的表示层进行解密。

解码 编码

人类能读懂的计算机需要转换成计算机能读懂的编码。

### 7.应用层

应用层就是我们使用最多的一层，例如ajax调用接口发送http请求，再比如域名系统DNS，邮件协议[SMTP]，webSocket长连接，SSH协议

## TCP三次握手

相关名词描述

1.  seq（sequence number），序列号随机生成的
2.  ack（acknowledgement number）确认号 ack = seq + 1
3.  ACK （acknowledgement）确定序列号有效
4.  SYN（synchronous）发起新连接
5.  FIN （FINISH）完成

###SYN建立连接

首先客户端会发送一个段这个段就是SYN报文，想跟服务端进行连接，并且会携带一个序列号seq，下次发送的数据序列号还会进行+1

### SYN+ACK

服务端也会生成一个对应服务端seq序列号，这时候就会携带ACK确认号，表示之前的SYN 收到了，还会有一个小写的ack 把 客户端的seq + 1

### ACK=1

客户端收到服务端的响应之后会发送一个ACK确定序列号有效,并且还会发送seq注意这里的seq会通过算法计算出来是否跟服务端的ack值相等，然后会发送一个新的ack这里的ack是服务端的seq值+1，确保一切正常

##TCP四次挥手

### FIN

生成客户端的seq=u序列号随后进入wait1状态

### ACK

服务端收到FIN包表示自己进入了关闭等待状态，然后向客户端使用ack=u+1验证，验证成功打上ACK标记。这是第二次挥手，服务端此时还可以发送未完成的数据。

### FIN ACK

向客户端发送FIN包,并且验证ack，使用客户端第一次的ack=u+ 1去验证，验证成功打上ACK标记，并且生成一个新的序列号seq=w发送给客户端，这是第三次挥手。

### ACK

客户端收到之后进入超时等待状态2MSL（1-4分钟），经过等到后客户端关闭连接，而服务端收到信息验证完成ack成功之后打上ACK（seq=u+1、ack=w+1）标记随后将关闭连接

## 浏览器输入URL

### URL

访问协议+域名+端口+路径+参数

###DNS查询

域名转ip地址

查询顺序：浏览器本身DNS-本地hosts文件-路由器缓存-向域名服务器查找（DNS缓存-根域名服务器-顶级域名服务器-主域名服务器）

### 经过七层参考模型

### 三次握手

### 发送http请求

options预检请求：1、遇见跨域时会出发。2、自定义请求头

###四次挥手

### 页面开始渲染

构建DOM树：浏览器解析HTML文件，构建DOM树（文档对象模型）。DOM树是表示网页内容的树状结构，它由多个节点构成，每个节点代表HTML中的一个元素、文本内容或注释。

加载CSS样式(异步微任务)：浏览器解析HTML文件时，（遇到样式表）会同时解析其中的CSS样式表，并将其应用到相应的元素上，从而实现网页的样式和布局。

构建渲染树：浏览器根据DOM树和CSS样式信息构建渲染树。渲染树是表示网页视觉呈现的树状结构，它包含了所有需要显示的元素，以及它们的样式和布局信息。

进行布局和绘制：浏览器根据渲染树进行布局和绘制。布局是指确定每个元素在屏幕上的位置和大小，而绘制则是将元素绘制到屏幕上

### 回流与重绘

回流：当页面中部分或者全部元素发生变化时，浏览器重新渲染部分或者全部文档

​		-页面首次渲染

​		-窗口大小变化

​		-元素尺寸位置内容大小变化

​		-添加或删除新的DOM元素

​		-激活伪类（：hover）

重绘：当页面中的样式变化不影响他在文档流的位置，浏览器会赋予元素新样式并重新绘制它

## CDN内容分发网络

### 网站上线

服务器上存放前端资源（html、css、js）

## 浏览器跨域

### 原因：浏览器同源策略

同源策略：请求的时候拥有相同的协议、域名、端口。只有有一个不同就属于跨域

### 01 前后端协商jsonp

script的src不受跨域限制，跨域跨域请求数据，只能发送get请求

### 02 前端代理

借助构建工具config文件中

```js
 devServer: {
        proxy: {
            '/api': {
                target: 'http://192.168.2.90:3000',//后端接口
                changeOrigin: true,//是否允许跨越
                pathRewrite: {
                    '^/api': '/api'//重写,
                }
            }
        }
    }
```



###03 后端设置请求头

### 04 nginx代理

## 强缓存和协商缓存

强缓存，指的是 让浏览器强制缓存服务端提供的资源

协商缓存，当一个浏览器第一次访问一个网站的时候，向该网站的服务器发送请求。服务器返回资源和资源的标识。浏览器会把该资源和该标识缓存到本地。

## code码

304 (未修改) 自从上次请求后，请求的网页未修改过。服务器返回此响应时， 不会返回网页内容

401（未授权） 请求要求身分验证

403（禁止） 服务器拒绝请求

404（未找到） 服务器找不到清求的网页

500（服务器内部错误) 服务器遇到错误，无法完成请求

505（HTTP版本不受支持） 服务器不支持请求中所用的HTTP协议版本
